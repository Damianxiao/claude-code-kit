# Web3 项目 Claude 配置模板

## 项目概述
这是一个Web3/区块链项目，集成了智能合约和前端DApp。

## 技术栈
- **前端**: React + TypeScript + Web3库
- **智能合约**: Solidity
- **区块链**: Ethereum/BSC/Polygon
- **Web3库**: ethers.js/web3.js/viem
- **钱包连接**: WalletConnect/MetaMask

## 开发规范

### 智能合约
- 使用Solidity最新稳定版本
- 遵循OpenZeppelin标准
- 实现完整的安全检查
- 编写全面的测试用例

### 前端开发
- 使用TypeScript严格模式
- 实现错误边界和加载状态
- 处理网络切换和钱包连接
- 优化Gas费用显示

### 安全考虑
- 输入验证和清理
- 重入攻击防护
- 整数溢出检查
- 权限控制验证

## 常用命令

### 智能合约
```bash
# 编译合约
npx hardhat compile

# 运行测试
npx hardhat test

# 部署到测试网
npx hardhat run scripts/deploy.js --network testnet

# 验证合约
npx hardhat verify --network mainnet DEPLOYED_CONTRACT_ADDRESS
```

### 前端开发
```bash
# 启动开发服务器
npm start

# 构建生产版本
npm run build

# 运行测试
npm test
```

## 架构说明

### 智能合约架构
- **代理模式**: 使用可升级合约
- **访问控制**: 基于角色的权限管理
- **事件日志**: 完整的操作记录
- **Gas优化**: 批量操作和存储优化

### 前端架构
- **状态管理**: Context API或Redux
- **Web3集成**: 统一的Provider层
- **错误处理**: 全局错误边界
- **用户体验**: 加载状态和交易确认

## Web3特定注意事项

### 网络处理
- 支持多链切换
- 网络状态检测
- RPC节点故障转移
- 交易状态跟踪

### 钱包集成
- 多钱包支持
- 连接状态管理
- 签名请求处理
- 账户变更监听

### 交易处理
- Gas费估算
- 交易确认等待
- 失败重试机制
- 用户友好的错误信息

### 安全最佳实践
- 前端验证 + 合约验证
- 敏感操作二次确认
- 金额显示精度处理
- 防止常见攻击向量

## 测试策略

### 智能合约测试
- 单元测试覆盖所有函数
- 集成测试模拟真实场景
- 边界条件和异常情况
- Gas消耗优化测试

### 前端测试
- 组件单元测试
- Web3交互集成测试
- 用户流程端到端测试
- 跨浏览器兼容性测试

## 部署流程

### 测试网部署
1. 编译和测试合约
2. 部署到测试网
3. 验证合约代码
4. 前端配置更新
5. 功能测试验证

### 主网部署
1. 安全审计完成
2. 测试网充分验证
3. 部署脚本准备
4. 监控和应急预案
5. 逐步发布策略

## 监控和维护

### 链上监控
- 合约事件监听
- 异常交易告警
- Gas价格跟踪
- 网络状态监控

### 前端监控
- 错误日志收集
- 性能指标跟踪
- 用户行为分析
- Web3连接状态
